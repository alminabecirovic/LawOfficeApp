<Window x:Class="LawOfficeApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:LawOfficeApp"
        Title="Upravljanje advokatskom kancelarijom" Height="600" Width="900" Background="White">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- HEADER -->
        <StackPanel Grid.Row="0" Background="White" Margin="20,20,20,10">
            <TextBlock Text="Advokatska kanncelarija" FontSize="22" FontWeight="Bold" Margin="0,0,0,15"/>
            <StackPanel Orientation="Horizontal">
                <Button Name="BtnDashboard" Content="Kontrolna tabla" Width="120" Height="30" Margin="0,0,10,0" Click="BtnDashboard_Click"/>
                <Button Name="BtnClients" Content="Klijenti" Width="90" Height="30" Margin="0,0,10,0" Click="BtnClients_Click"/>
                <Button Name="BtnCases" Content="Predmeti" Width="90" Height="30" Margin="0,0,10,0" Click="BtnCases_Click"/>
                <Button Name="BtnInvoices" Content="Fakture" Width="90" Height="30" Margin="0,0,10,0" Click="BtnInvoices_Click"/>
                
            </StackPanel>
            <Separator Margin="0,15,0,0"/>
        </StackPanel>

        <!-- CONTENT -->
        <ScrollViewer Grid.Row="1" Background="White">
            <StackPanel Margin="20">

                <!-- DASHBOARD -->
                <StackPanel Name="TabDashboard" Visibility="Visible">
                    <TextBlock Text="Kontrolna tabla" FontSize="18" FontWeight="Bold" Margin="0,0,0,15"/>

                    <TextBlock Text="Aktivni predmeti" FontWeight="Bold" Margin="0,10,0,5"/>
                    <DataGrid Name="GridDashboardCases" Height="150" AutoGenerateColumns="False" IsReadOnly="True" 
                              BorderBrush="LightGray" BorderThickness="1">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Naziv predmeta" Binding="{Binding CaseTitle}" Width="250"/>
                            <DataGridTextColumn Header="Klijent" Binding="{Binding Client.GetFullName}" Width="150"/>
                            <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <TextBlock Text="Nadolazeći rokovi" FontWeight="Bold" Margin="0,20,0,5"/>
                    <DataGrid Name="GridDashboardDeadlines" Height="120" AutoGenerateColumns="False" IsReadOnly="True"
                              BorderBrush="LightGray" BorderThickness="1">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Predmet" Binding="{Binding CaseTitle}" Width="300"/>
                            <DataGridTextColumn Header="Rok" Binding="{Binding DeadlineDate, StringFormat=d}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>

                </StackPanel>

                <!-- CLIENTS -->
                <StackPanel Name="TabClients" Visibility="Collapsed">
                    <TextBlock Text="Upravljanje klijentima" FontSize="18" FontWeight="Bold" Margin="0,0,0,15"/>

                    <TextBlock Text="Dodaj novog klijenta" FontWeight="Bold" Margin="0,0,0,10"/>
                    <StackPanel>
                        <TextBlock Text="Ime"/>
                        <TextBox Name="TxtClientFirstName" Margin="0,5,0,10" Padding="5"/>
                        <TextBlock Text="Prezime"/>
                        <TextBox Name="TxtClientLastName" Margin="0,5,0,10" Padding="5"/>
                        <TextBlock Text="Email"/>
                        <TextBox Name="TxtClientEmail" Margin="0,5,0,10" Padding="5"/>
                        <TextBlock Text="Telefon"/>
                        <TextBox Name="TxtClientPhone" Margin="0,5,0,10" Padding="5"/>
                        <Button Name="BtnAddClient" Content="Dodaj klijenta" Width="120" Height="30" 
                                HorizontalAlignment="Left" Margin="0,5,0,0" Click="BtnAddClient_Click"/>
                    </StackPanel>

                    <Separator Margin="0,20"/>

                    <TextBlock Text="Ažuriraj klijenta" FontWeight="Bold" Margin="0,20,0,10"/>
                    <StackPanel>
                        <TextBlock Text="Izaberi klijenta"/>
                        <ComboBox Name="CmbUpdateClient" Margin="0,5,0,10" Padding="5" 
                                  DisplayMemberPath="GetFullName" SelectedValuePath="Id"/>
                        <TextBlock Text="Novi Email"/>
                        <TextBox Name="TxtUpdateEmail" Margin="0,5,0,10" Padding="5"/>
                        <Button Name="BtnUpdateClient" Content="Ažuriraj" Width="100" Height="30" 
                                HorizontalAlignment="Left" Margin="0,5,0,0" Click="BtnUpdateClient_Click"/>
                    </StackPanel>

                    <Separator Margin="0,20"/>

                    <TextBlock Text="Svi klijenti" FontWeight="Bold" Margin="0,20,0,5"/>
                    <DataGrid Name="GridClients" Height="250" AutoGenerateColumns="False" IsReadOnly="True"
                     BorderBrush="LightGray" BorderThickness="1">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Ime" Binding="{Binding FirstName}" Width="120"/>
                            <DataGridTextColumn Header="Prezime" Binding="{Binding LastName}" Width="120"/>
                            <DataGridTextColumn Header="Email" Binding="{Binding Email}" Width="180"/>
                            <DataGridTextColumn Header="Telefon" Binding="{Binding PhoneNumber}" Width="120"/>
                            <DataGridTextColumn Header="Predmeti" Binding="{Binding Cases.Count}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </StackPanel>

                <!-- CASES -->
                <StackPanel Name="TabCases" Visibility="Collapsed">
                    <TextBlock Text="Profil predmeta" FontSize="18" FontWeight="Bold" Margin="0,0,0,15"/>

                    <TextBlock Text="Dodaj novi predmet" FontWeight="Bold" Margin="0,0,0,10"/>
                    <StackPanel>
                        <TextBlock Text="Naziv predmeta"/>
                        <TextBox Name="TxtCaseTitle" Margin="0,5,0,10" Padding="5"/>
                        <TextBlock Text="Opis"/>
                        <TextBox Name="TxtCaseDesc" Height="60" TextWrapping="Wrap" Margin="0,5,0,10" Padding="5"/>
                        <TextBlock Text="Izaberi klijenta"/>
                        <ComboBox Name="CmbCaseClient" Margin="0,5,0,10" Padding="5" 
                                  DisplayMemberPath="GetFullName" SelectedValuePath="Id"/>
                        <TextBlock Text="Izaberi advokata"/>
                        <ComboBox Name="CmbCaseLawyer" Margin="0,5,0,10" Padding="5" 
                                  DisplayMemberPath="GetFullName" SelectedValuePath="Id"/>
                        <TextBlock Text="Rok"/>
                        <DatePicker Name="DateCaseDeadline" Margin="0,5,0,10"/>
                        <Button Name="BtnAddCase" Content="Dodaj predmet" Width="120" Height="30" 
                                HorizontalAlignment="Left" Margin="0,5,0,0" Click="BtnAddCase_Click"/>
                    </StackPanel>

                    <Separator Margin="0,20"/>

                    <TextBlock Text="Svi predmeti - Kliknite za detalje" FontWeight="Bold" Margin="0,20,0,5"/>
                    <DataGrid Name="GridCases" Height="200" AutoGenerateColumns="False" IsReadOnly="True"
                              BorderBrush="LightGray" BorderThickness="1" SelectionChanged="GridCases_SelectionChanged">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="40"/>
                            <DataGridTextColumn Header="Naziv" Binding="{Binding CaseTitle}" Width="200"/>
                            <DataGridTextColumn Header="Klijent" Binding="{Binding Client.GetFullName}" Width="150"/>
                            <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="100"/>
                            <DataGridTextColumn Header="Rok" Binding="{Binding DeadlineDate, StringFormat=d}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <Separator Margin="0,20"/>

                    <TextBlock Text="Izabrani predmet - Detaljan profil" FontWeight="Bold" FontSize="16" Margin="0,20,0,10"/>
                    <Border BorderBrush="LightGray" BorderThickness="1" Padding="15" Background="WhiteSmoke">
                        <StackPanel>
                            <TextBlock Name="TxtCaseDetailsInfo" Text="Izaberite predmet iznad za pregled detalja" 
                   TextWrapping="Wrap" FontSize="13" Margin="0,0,0,15"/>

                            <!-- Dugmad za promenu statusa -->
                            <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                <TextBlock Text="Promeni status: " FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                <Button Name="BtnSetActive" Content="Aktivan" Width="80" Height="30" Margin="0,0,5,0" Click="BtnSetActive_Click"/>
                                <Button Name="BtnSetTrial" Content="Suđenje" Width="80" Height="30" Margin="0,0,5,0" Click="BtnSetTrial_Click"/>
                                <Button Name="BtnSetResolved" Content="Rešen" Width="80" Height="30" Margin="0,0,5,0" Click="BtnSetResolved_Click"/>
                                <Button Name="BtnSetRejected" Content="Odbijen" Width="80" Height="30" Margin="0,0,5,0" Click="BtnSetRejected_Click"/>
                                <Button Name="BtnSetOnHold" Content="Na čekanju" Width="90" Height="30" Click="BtnSetOnHold_Click"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- INVOICES -->
                <StackPanel Name="TabInvoices" Visibility="Collapsed">
                    <TextBlock Text="Fakturisanje" FontSize="18" FontWeight="Bold" Margin="0,0,0,15"/>

                    <TextBlock Text="Kreiraj fakturu" FontWeight="Bold" Margin="0,0,0,10"/>
                    <StackPanel>
                        <TextBlock Text="Broj fakture"/>
                        <TextBox Name="TxtInvoiceNumber" Margin="0,5,0,10" Padding="5"/>
                        <TextBlock Text="Iznos"/>
                        <TextBox Name="TxtInvoiceAmount" Margin="0,5,0,10" Padding="5"/>
                        <TextBlock Text="Izaberi predmet"/>
                        <ComboBox Name="CmbInvoiceCase" Margin="0,5,0,10" Padding="5" 
                                  DisplayMemberPath="CaseTitle" SelectedValuePath="Id"/>
                        <Button Name="BtnCreateInvoice" Content="Kreiraj fakturu" Width="130" Height="30" 
                                HorizontalAlignment="Left" Margin="0,5,0,0" Click="BtnCreateInvoice_Click"/>
                    </StackPanel>

                    <Separator Margin="0,20"/>

                    <TextBlock Text="Sve fakture" FontWeight="Bold" Margin="0,20,0,5"/>
                    <DataGrid Name="GridInvoices" Height="300" AutoGenerateColumns="False" IsReadOnly="True"
                      BorderBrush="LightGray" BorderThickness="1" 
                      SelectionChanged="GridInvoices_SelectionChanged">             
                        <DataGrid.Resources>
                            <local:BoolToYesNoConverter x:Key="BoolToYesNoConverter"/>
                        </DataGrid.Resources>
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Broj fakture" Binding="{Binding InvoiceNumber}" Width="120"/>
                            <DataGridTextColumn Header="Iznos" Binding="{Binding Amount, StringFormat=c}" Width="100"/>
                            <DataGridTextColumn Header="Datum" Binding="{Binding IssueDate, StringFormat=d}" Width="120"/>
                            <DataGridTextColumn Header="Plaćeno" Binding="{Binding IsPaid, Converter={StaticResource BoolToYesNoConverter}}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                    <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                        <TextBlock Text="Promeni status plaćanja: " FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <Button Name="BtnMarkAsPaid" Content="Označi kao plaćeno" Width="150" Height="30" Margin="0,0,10,0" Click="BtnMarkAsPaid_Click"/>
                        <Button Name="BtnMarkAsUnpaid" Content="Označi kao neplaćeno" Width="160" Height="30" Click="BtnMarkAsUnpaid_Click"/>
                    </StackPanel>
                </StackPanel>

            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>